<!DOCTYPE html>

<!-- 
    ParserSweet v2.0.html
    Features
    - AXL response parser
    - POS Data Code DE22 parser for EFTEX
    - CBA MTI parser
	- New UI
	- New Name
-->

<!-- 
    Parser v1.5.html
    Version: 1.5
    Last Updated: July 22, 2025
    Changes:
    - Fixed posDataDefinitions initialization error
    - Improved displayDefinitions formatting
    - Added toggle button for showing/hiding definitions
	- Improved Request and Response output display
-->

<!-- 
    ParserSweet v2.0.html
    Version: 2.0
    Last Updated: July 24, 2025
    Changes:
    - New UI
	- New Tool Name
-->

<!-- 
    ParserSweet v2.1.html
    Version: 2.1
    Last Updated: July 26, 2025
    Changes:
    - Added Paymark Host Record parser
	- Added Message Alert
	- Changed Request and Response output display
	- Added logo and icon
-->

<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  
  
  <!-- <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAABCGlDQ1BJQ0MgUHJvZmlsZQAAeJxjYGA8wQAELAYMDLl5JUVB7k4KEZFRCuwPGBiBEAwSk4sLGHADoKpv1yBqL+viUYcLcKakFicD6Q9ArFIEtBxopAiQLZIOYWuA2EkQtg2IXV5SUAJkB4DYRSFBzkB2CpCtkY7ETkJiJxcUgdT3ANk2uTmlyQh3M/Ck5oUGA2kOIJZhKGYIYnBncAL5H6IkfxEDg8VXBgbmCQixpJkMDNtbGRgkbiHEVBYwMPC3MDBsO48QQ4RJQWJRIliIBYiZ0tIYGD4tZ2DgjWRgEL7AwMAVDQsIHG5TALvNnSEfCNMZchhSgSKeDHkMyQx6QJYRgwGDIYMZAKbWPz9HbOBQAAAH+0lEQVR4nM2Ya4xcZRnHf897zszOzs5s99ru2i1tl162XaAtKppWDELBotyqJCjGhKBg1Jj4AS8xJBhBIcaEeEuIqK0FDQkqUgNWpQVcwW5vQGjLtgVboC27bXfb7s71zHnfxw/nzLakndlS/eCTnJkz877nPf/zfy7v/zmiqsr/kflTTTgfuCLnAyWymoA0BmPOc3GnijkPZDKVy4pli3XnRpPEQLLpxHmDOoMhjT+CiuX+3wzxz1eP4/kS/Y+8y4ciIBpdI6rRHwrtzQnu+UIfC2Y3Y53ivQeaz2CousAjTx3gZxuHufYzfVhbff747jFoURAXH1ZJGsPYcI5nnh5iekuSh79zKRd0N+GcYs4RVM0Y2vfWBIuWzqB3cQu5cTDmtKdw8beNzo0DCSHlgZaV3tmtTGtr5sv3b2ft9y6jsyV1zqBMrQHPE8LQUSkqYclRKSlhSQmLSqXoCPOOsOCoFB2VQnQERSUMLOVSyOUr5pHtaOer39/KeL6CMYI7h5StCQgilxgEo4LRiAnjwHPgqeCp4DuD5+JxFXCKiBAUYeUV/VT8Zr52/1aK5RAjMmUZqQ2oCsCCcYpnNTq3ijidjJ3od+w2C+mGJPlciXyuBAo3fGIJJ8M03/7xK5TKtrp0TatbGEWjm5gQxEQZZFRABVFFrIADL35yW1K6OrPM6pnG+vWbaWlpQgBPYOPgGE8+d5BbPj67bubVBiSxe8KIJVFFNAKlThEiMEahlCuRSiTACTjhmo9dxIEDxyjkAwRoTHkIPgdHclO6rCYg0cg1xkYseXrK/6mEISgpHkIpX2b9Ezu4/tqldLamKeUdokLfnOkIYC20ZuHgoQkaEiEi4KxiBOQsRbN2DAkYJ5gqQyF4FnwLB/YeRQNLg4Ejh0+iIWRSKQ78exQvjqdy3lEpKL6F48cCTkwUOTwacHSsRMI3iJw96+pmGe60QLZKOiEMbBpiYOMefIWEwuGDY0zvyJJNGZ4dGOLZF4do9IWkMRCGbPjXED///SCFk8d5bc8Jbr17kK8/+AqHRvKYs4CqAyhKdwkBC5mkYeC5fewdGmb1DctIik9YhpGRCXqmt+BbWH31MvbtH+H5La+DrbBuww6C4UP8cLnPn65L88QNadauTJEZPc7n7tnG7jdOnAGqJiAhTu0QGj2PrYNvsvPVw9zyqffT3twEoZKfKJPPl+mZ0Uq5AO2ZNLeu+iBvvDnCQ09upS9dZM3107isy2PjWyGP7grIBXDftc3cNs/jrp/uZCIfIJyKzzoxFBc7C76DiZNFfM/Qkk5jy5AU4cjIOAnP0JFN4yqKVpTWdArj+3iVEt/9UIbRCeWzTxd58OUKf3vbcfvfCzzwbIHbPpBmjlRYt+HtKNBjRHUYiuqQ7yAoWlau6KO7s5nf/XEQrYSkPDh4aIzOlgyNvsEoYC2Pb9rB/iPjrJqTItvocd9giRmNhqc+mWXdqgxrr8zylzcrbHitwh39aQZeGkX11D43RVBXd/Ko6K2+6hIyjUkef2o7rqKMHBtn1vSWqHiq8timl0h6HvNmdtDbCMVx2HXCcveSNHuPOR7aXmJ+q89dFzfx2z1luht9XDFgvBBGWkKnAFTdDjwnqAVC4aYrltLf28Wx0RLjuRKzOlrRCrgAFnR3cPPyJfjGQ6zBhR7Wgav4tPtJHtlXYWC/ZUVbA3kLowUhKfIuAVi3DkkcQ+IiUDZQkuLz0YtnU8yXaWlqoCPbRBgoPsKKhXPJ+D6ZhiS7T1iaGpIsnpbgGzvG2TZmSScUsYYwNCSMMJwTJOUzrSlRDdt6DCnEBTE64qodKuMnHTOyWT69YhkmlEmBVipawgAu6upg4GhALifc299GdzLBT3ZPcGN3Ex/pyrDhUMDMRp/N75RYOL8Zz5xiqX7XocR1KJIU0TYtCNEmmxAPtbGKVMEHyoHj4ukdDDa3cO/Lx/jB0i4eWDIdLOALLx8psH64wKJMAy/mijy0anbkqngXqb2XSbSjE0sQkSjzqkBRRTXORgeigqqS8gxHJwqUSkW2e/DFbcMsb0vTlvDYWwjYeDSHhLC5kOdbdy5i1oz0u5qBOgzFOseCWEFMzNgkIIlLgyAozjmSxpAvl1n7jy0svnIO2cYGnnlyN/tLjnwlQC1kE4a+uVnuuLmXS/vazpC2dQBF8qKqmyUW9ZOjWp2lqIOEGCphhTXPb+HC5T3MnNXK04/u4POXXsK89mk89tIQ3b2W22+cz9yeDMBZdXYdl8VM2Di4pdoIxQvEldWp4mMAx9qBbXQuaWd+fxdP/HIzqxdexIL2TpICaZOkewbM7ckQxvLjbKK/JiBrlYQxpEQIRPBOv1aZ7MGiVFXWvLCNhgubWPbhuaz/1RZuWtDPZbO6GM+HZBp8RJVyoDjVKCneq2Kcf0GWdZvf4ZL3dWI1UoiT8TMJTGlM+mx4dQ+lLo+VVy/kD7/YTH9zJ7NbWnl95CQ+wlgOho6OsrJnDkYEK1rjrmdpFE/vXB/49S627DxOwjenSc+qL6NMnJgI6Oxt5fLrFvPnNdugGJDNpChXInVoRAhCx/IlbXzztsX4vqn7MmLK3j5XqBBaPRVTp5EkAl+5byuti2by+s5hrurLcOctC7HWYYxEXlXwPSET9/tTmtYwp6rW1Ro9ZX994bBe86VN+qO1u+rOO5e1VFWnZGiqLkEEKqEj4Zu688/1JciUgKayapWtvvz4b62+HjqXBf6HYAD+A/29UmBRuWuRAAAAAElFTkSuQmCC">
  -->
  
  <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAtFBMVEX///8AAAD8/Pxvb2///v6VlZVgYGD4+PigoKB6enr/NDSOjo5paGh4eHj/OTlWVlZZWFgGBgakpKRMTEz/MTEhICAqKiq2tra9vb3+RUVDQ0MQDg4fFhb/8/Po6Oj/UFD/6enFxcX/+fn/19f/XV3w8PD/mJj/bGz/pqaBf3+urq7/d3dAMzP9j4/9zMyHh4f8hYXPzMz/r6/i4uKbm5v/3t7Y2dmmLCz/urr/v7/hLi6IVlZOwAOuAAAEI0lEQVRo3u2ZDXOqOhCGg6LUKNEoKigIAoqCiJ+1vff//68bErRw5tweCOmZTscdZzQZhsd3d7P5AuBpT3sav53DpEms96mFjToIpTWRStj8ItdgdDCeqd3PLRnXo1zwvLv600ONmbTD8wuvxxY73CohdyZdOtK8xalFx7s/6gAygbwoTULh09KS2nIpJS9gpWJOylZqgpIQkiOcWtTyEBmsOCmlIUMCAcqWy2MdApFLQzgpFSDsF6F0FQ4IqAABSoJxonwxJNWCK2qpDgGNZF6RUgqSjnhVn94tnEl4q3yFkl8MTwVCXMtyiYe6o6KZOffVhFhvh8D3g3hvAaVoo7TMiIC4bz7SoKZpEAXvxQHY6AuCWDEiBMM2DAg1FFtfAXFjqEF/4znX/donPyOHH/K/BXKDIIqzFztrA8FDTktjIATiGRrakEA0XFrZ3tKmaEjjoGlxA1inKDi8pxJOCNpXwe7yDOg7wIlgGvQ0HO4BobVgyBoS78gxRNBAmhY41H++IxTiBprhAceGxsY72SQDZOBG0NgLhTi25ltgj7TgerrujZTIxImEXA0YuNRDAXHSQYMnkmAIrgVDEIFYAUQI2c4Gpq9/R1oscsTLJBo2ifLehpDk1BpC4qgT5Fby+7Ji+RCd0kyOo43lkAYJ+YF1CaxdawRZwsrAOiAYWCQXkO2JhVxJ3gYeKSuuFyFkvKe1DEWuKEiDrcI2BtSMKN7+eyPj8QRkz0boTVSpP7bbSzocN4YG/zHJZH7z32R9sLvByBIEOZL94/hIg7GPjFu6ZDCPYJnu5m6eoElrSfeoWY+731HIK+il32NdDIQxJDVrvprp2meyj6miPKXifJKH6GP6stE5aw9pc2ejNDbEJsv6SjJG/86QqZfwDULjMCtSuJVMGaO9eBxUUOeZhr/2wHlUoPBCQsbofeyFL7RjcKWZW6RwQkLqdtz8YKyoi3B419VnlCM/ZMpCq+bW6iGmLz0/jhUoBVMKHyRL3nZOCPNP7yNtO+wgJ+R3V0YZLIpCPnYISod2mEO5RuAzSn+Rj4j0OBNZNRkjrJVd8nKcp1zoO6XkzqBj5s6osYLMD3g2RqTxaxb0AWtO6y9TGQWPFumRC7Umm1yyQfJg1FoLZ1oSsCgKUWsWyOKSiFGarP5KUjfrpgGZ6KJW9SnFXGa5dRcCdDNfgutPv/qoT/6xnFbL3GngtD84itzOKayyHJOtntuMNr5oY/rp6erPgQy+H0T9xpD+j4EMnpBnCn8TJT+nCnPHZPg3YvLtIJ2/AemWugL81ZQR1is8ruPJojrkPDZfyz8tr3aPlXsFb6nSqNItzbDMBXPRVlts6tXcm6RX5a0Kpu6k+UvFa0DlUurSP38LtJtWv9A8h9teu7T1kilHqrAM+L0B+il2Pe1pP9j+AwW3ZdTixUYKAAAAAElFTkSuQmCC
  ">

  
  <title>ParserSweet 2.1</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      background: #00AFDA;
	  /* background: linear-gradient(135deg, #B3F1FF 0%, #00AFDA 100%); */

    }

    .screen {
      display: none;
      height: 100vh;
      width: 100vw;
      position: absolute;
      top: 0;
      left: 0;
      background: #00AFDA;
	  /* background: linear-gradient(135deg, #B3F1FF 0%, #00AFDA 100%); */

      padding: 40px;
      animation: fadeIn 0.6s ease-in-out;
    }

    .screen.active {
      display: block;
    }

    /* Centered Home Screen */
    #home {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .card {
      background: white;	  
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
      max-width: 800px;
      margin: auto;
      animation: fadeIn 1.5s ease-in-out;
    }

    h1 {
      font-size: 2.8em; 
	  /* background: linear-gradient(135deg, #B3F1FF 0%, #00AFDA 100%); */
	  background: #B3F1FF;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 20px;
    }

    q {
      font-size: 1.5em;
      font-weight: bold;
	  color: #999;
    }
	
	p {
      font-size: 1.2em;
      color: #999;
    }

    .buttons {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 30px;
      background: #00AFDA;
      color: white;
      font-size: 1em;
      cursor: pointer;
      transition: transform 0.2s ease, background 0.3s ease;
    }

    .btn:hover {
      background: #007A99;
      transform: scale(1.05);
    }

    .back-btn {
      margin-top: 30px;
      background: #006B8F;
	  
		bottom: 30px;
		right: 30px;
		position: fixed; 
		cursor: pointer;
		
    }

    .back-btn:hover {
      background: #004F6B;
    }
	

	.container {
            display: none;
            padding: 20px;
            border: 1px solid #ccc;
            border-top: none;
        }
        .container.active {
            display: block;
        }
        .flex-container {
            display: flex;
            gap: 20px; /* Increased gap between input and output */
        }
        .input-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 50%; /* Set width to half */
        }
		
		.output-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 50%; /* Set width to half */
			margin-bottom: 90px;
        }
		
        textarea, pre, table {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ddd;
            font-family: monospace;
        }
        textarea {
            height: 200px;
			width: 100%;
        }
		#ParsedTables {
		display: flex;
		flex-wrap: wrap;
		gap: 20px;	
		margin-bottom: 30px; 		
		}	
        table {
            border-collapse: collapse;
            background-color: #f4f4f4;
			
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
			width: 100%;
        }
        th {
            background-color: #00AFDA;
            color: white;
        }
        th.key-column {
            width: 25%; /* Fixed width for key column */
        }
        th.value-column {
            width: 75%; /* Fixed width for value column */
        }
        tr:nth-child(even) {
            background-color: #f2f2f2; /* Color for even rows */
        }
        tr:nth-child(odd) {
            background-color: #e9e9e9; /* Color for odd rows */
        }
        button {   
			margin-top: 30px;
			padding: 12px 24px;
			border: none;		
            border-radius: 30px;
            /* background-color: #007BFF; */
            background-color: #006B8F;
			color: white;
            cursor: pointer;
			font-size: 1em;
        }
        button:hover {
            background-color: #004F6B;
			transform: scale(1.05);
        }
        #copy-button {
            display: none; /* Initially hide the copy button */
        }
        .de22-input-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }
		
		#DefinitionsOutput {
            border: 1px solid #000;
            padding: 10px;
            margin-top: 10px;
            width: 100%;			
            height: 150px;
            overflow-y: auto;
            background-color: #f9f9f9;
            white-space: pre-wrap;
            resize: none;
            display: none; 
            margin-left: 0;
			margin-right: 40px;  			
			font-size: 10px; /* Adjust the font size as needed */
			column-count: 3; /* Create two columns 	*/
			column-gap: 5px; /* Add */
			flex-direction: column;
        }
		
		#parsedDataOutput {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            width: 45%;            
            height: 200px;
            overflow-y: auto;
            background-color: #f9f9f9;
            white-space: pre-wrap;
            resize: none;
			bottom: 60px;
			
        }
		
	
	#isoTables {
	
	}	
	.tables-container { 
      display: flex;
	flex-wrap: wrap;
	gap: 20px;
	margin-bottom: 40px;
    }
	
    .table-box {
      
	  min-width: 300px;
      max-width: 100%;
      resize: horizontal;
      overflow: auto;
      border: 1px solid #ccc;
      padding: 10px;

    }
    table {      
		width: 100%;
      border-collapse: collapse;
      table-layout: fixed;
      word-wrap: break-word;	  
    }
    th, td {
      border: 1px solid #ccc;
      padding: 8px;
      text-align: left;
    } 	
    h2 {
      margin-top: 20px;
	  color: #B3F1FF;
    }	
	
	
	.field-column-fixed {
      width: 60px;
    }

	.tag-column-fixed {
      width: 250px;
    }


.section {
      width: 100%;
      margin-top: 20px;
      border-radius: 8px;
      padding: 0;
      box-sizing: border-box;
    }

    .section-header {
      /* background: #0078D7;*/
	  background: #4682B4;
	  
      color: white;
      padding: 10px;
      cursor: pointer;
      border-radius: 6px;
      width: 100%;
      display: block;
      box-sizing: border-box;
	  font-family: 'Consolas', 'Roboto Mono', 'Courier New', monospace;
      margin: 0;
	  font-weight: bold;
    }

    .section-content { display: none; padding: 10px; }
    .record { margin-bottom: 10px; background: #f9f9f9; }
    .record-header {
      cursor: pointer;
      padding: 10px;
      background: #e6f0ff;
      font-weight: bold;
	  color: #6C757D; 
      border-top-left-radius: 8px;
      border-top-right-radius: 8px;
	  font-family: 'Consolas', 'Roboto Mono', 'Courier New', monospace;
    }
    .record-content {
      display: none;
      padding: 10px;
      font-family: 'Consolas', 'Roboto Mono', 'Courier New', monospace;
      font-size: 14px;
    }
    ul { padding-left: 20px; }
    .wrap-modulus {
      word-break: break-all;
      white-space: normal;
    }

    .key {
      color: #6C757D;
      font-weight: bold;
    }

    .value {
      color: #007BFF;
    }
	


.record-content {
  max-width: 100%;
  overflow-wrap: break-word;
  word-break: break-word;
  white-space: normal;
}

.wrap-modulus .value {
  display: block;
  overflow-wrap: break-word;
  word-break: break-word;
  white-space: normal;
  max-width: 100%;
}



	
.field-content {
  margin-top: 10px;
  padding-left: 15px;
  border-left: 2px solid #ccc;
}

.record-field {
  margin-bottom: 6px;
}



label {
  font-family: 'Segoe UI', sans-serif;
  color: #B3F1FF;
}

.tab-container {
    font-family: Arial, sans-serif;
	background: transparent;
  }

  .tabs {
    list-style: none;
    padding: 0;
    display: flex;
    border-bottom: 2px solid #ccc;
    margin-bottom: 10px;
  }

  .tab {
    padding: 10px 20px;
    cursor: pointer;
    border: none;
    border-bottom: none;
    background: #f1f1f1;
    margin-right: 5px;
	
	border-top-left-radius: 20px;
	border-top-right-radius: 20px;

  }

  .tab.active {
    background: #fff;
    font-weight: bold;
    border-top: 2px solid #0078D7;
    border-left: 2px solid #0078D7;
    border-right: 2px solid #0078D7;
  }

  .tab-content {
    border: none;
    padding: 15px;
    background: transparent;
  }


.tabs .tab {
  color: white; /* Makes the tab text white */
  background-color: #006B8F; /* Optional: dark background for contrast */
  padding: 10px 20px;
  cursor: pointer;
  display: inline-block;
  border: none;
}

.tabs .tab.active {
  background-color: #004F6B; /* Highlight active tab */
  color: white;
}



#customAlert {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 255, 255, 0.6); /* semi-transparent white */
      color: #000;
      font-family: 'Segoe UI', sans-serif;
      padding: 20px 30px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      z-index: 9999;
      min-width: 300px;
      text-align: center;
	  justify-content: center;
	  align-items: center;
	  backdrop-filter: blur(10px);
    }

    #customAlert button {
     margin-top: 30px;
			padding: 12px 24px;
			border: none;		
            border-radius: 30px;
            /* background-color: #007BFF; */
            background-color: #006B8F;
			color: white;
            cursor: pointer;
			font-size: 1em;
    }

#blurWrapper.blurred {
  filter: blur(5px);
  pointer-events: none;
  user-select: none;
}

#overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.3);
  backdrop-filter: blur(5px); /* optional: blur the background */
  -webkit-backdrop-filter: blur(5px);
  z-index: 1000;
  display: none;
}

#parserlogo {
    background: transparent;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAtFBMVEX///8AAAD8/Pxvb2///v6VlZVgYGD4+PigoKB6enr/NDSOjo5paGh4eHj/OTlWVlZZWFgGBgakpKRMTEz/MTEhICAqKiq2tra9vb3+RUVDQ0MQDg4fFhb/8/Po6Oj/UFD/6enFxcX/+fn/19f/XV3w8PD/mJj/bGz/pqaBf3+urq7/d3dAMzP9j4/9zMyHh4f8hYXPzMz/r6/i4uKbm5v/3t7Y2dmmLCz/urr/v7/hLi6IVlZOwAOuAAAEI0lEQVRo3u2ZDXOqOhCGg6LUKNEoKigIAoqCiJ+1vff//68bErRw5tweCOmZTscdZzQZhsd3d7P5AuBpT3sav53DpEms96mFjToIpTWRStj8ItdgdDCeqd3PLRnXo1zwvLv600ONmbTD8wuvxxY73CohdyZdOtK8xalFx7s/6gAygbwoTULh09KS2nIpJS9gpWJOylZqgpIQkiOcWtTyEBmsOCmlIUMCAcqWy2MdApFLQzgpFSDsF6F0FQ4IqAABSoJxonwxJNWCK2qpDgGNZF6RUgqSjnhVn94tnEl4q3yFkl8MTwVCXMtyiYe6o6KZOffVhFhvh8D3g3hvAaVoo7TMiIC4bz7SoKZpEAXvxQHY6AuCWDEiBMM2DAg1FFtfAXFjqEF/4znX/donPyOHH/K/BXKDIIqzFztrA8FDTktjIATiGRrakEA0XFrZ3tKmaEjjoGlxA1inKDi8pxJOCNpXwe7yDOg7wIlgGvQ0HO4BobVgyBoS78gxRNBAmhY41H++IxTiBprhAceGxsY72SQDZOBG0NgLhTi25ltgj7TgerrujZTIxImEXA0YuNRDAXHSQYMnkmAIrgVDEIFYAUQI2c4Gpq9/R1oscsTLJBo2ifLehpDk1BpC4qgT5Fby+7Ji+RCd0kyOo43lkAYJ+YF1CaxdawRZwsrAOiAYWCQXkO2JhVxJ3gYeKSuuFyFkvKe1DEWuKEiDrcI2BtSMKN7+eyPj8QRkz0boTVSpP7bbSzocN4YG/zHJZH7z32R9sLvByBIEOZL94/hIg7GPjFu6ZDCPYJnu5m6eoElrSfeoWY+731HIK+il32NdDIQxJDVrvprp2meyj6miPKXifJKH6GP6stE5aw9pc2ejNDbEJsv6SjJG/86QqZfwDULjMCtSuJVMGaO9eBxUUOeZhr/2wHlUoPBCQsbofeyFL7RjcKWZW6RwQkLqdtz8YKyoi3B419VnlCM/ZMpCq+bW6iGmLz0/jhUoBVMKHyRL3nZOCPNP7yNtO+wgJ+R3V0YZLIpCPnYISod2mEO5RuAzSn+Rj4j0OBNZNRkjrJVd8nKcp1zoO6XkzqBj5s6osYLMD3g2RqTxaxb0AWtO6y9TGQWPFumRC7Umm1yyQfJg1FoLZ1oSsCgKUWsWyOKSiFGarP5KUjfrpgGZ6KJW9SnFXGa5dRcCdDNfgutPv/qoT/6xnFbL3GngtD84itzOKayyHJOtntuMNr5oY/rp6erPgQy+H0T9xpD+j4EMnpBnCn8TJT+nCnPHZPg3YvLtIJ2/AemWugL81ZQR1is8ruPJojrkPDZfyz8tr3aPlXsFb6nSqNItzbDMBXPRVlts6tXcm6RX5a0Kpu6k+UvFa0DlUurSP38LtJtWv9A8h9teu7T1kilHqrAM+L0B+il2Pe1pP9j+AwW3ZdTixUYKAAAAAElFTkSuQmCC);
    background-repeat: no-repeat;
    background-position: center center;
    padding: 75px 0px 55px 100px;
}



.header-container {
  
display: flex;
  justify-content: center; /* centers the group horizontally */
  align-items: center;     /* aligns text and logo vertically */
  gap: 10px;
  text-align: center;

}

#parserlogo img {
  width: 40px; /* adjust as needed */
  height: auto;
}



    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>

  <script>
      
    function showScreen(id) {
  // Hide all screens
  document.querySelectorAll('.screen').forEach(screen => {
    screen.classList.remove('active');
	document.getElementById('tabWrapper').style.display = 'none';
  });
  
  
  



  // Show the selected screen
  document.getElementById(id).classList.add('active');

  // Hide definitions if visible
  const definitionsContainer = document.getElementById('definitionsContainer');
  const definitionButton = document.getElementById('definitionButton');
  if (definitionsContainer) {
    definitionsContainer.remove();
    if (definitionButton) {
      definitionButton.textContent = 'Show Definitions';
    }
  }
  
  
const input = document.getElementById('json-input');
  if (input) input.value = '';

  // Clear the output container
  const output = document.getElementById('json-output');
  const copyButton = document.getElementById('copy-button');
  if (output) {
		copyButton.style.display = 'none';
		output.innerHTML = '';
	} 
	
	const tableResponse = document.getElementById('responseTable');
	const tableRequest = document.getElementById('requestTable');
	if (tableResponse) {		
		tableResponse.innerHTML = '';
	} 
	if (tableRequest) {		
		tableRequest.innerHTML = '';
	} 
	const inputMTI = document.getElementById('combinedInput');	
	if (inputMTI) inputMTI.value = '';
	
}

	
	
	function parseCardData(cardData) {
            const definitions = {
                cardDataInputCapability: {
                    '0': 'Unknown',
                    '1': 'Manual, no terminal',
                    '2': 'Magnetic stripe read',
                    '3': 'Bar code',
                    '4': 'OCR',
                    '5': 'Integrate circuit card (ICC)',
                    '6': 'Key entered',
                    'A': 'Contactless ICC',
                    'B': 'Contactless magnetic stripe'
                },
                cardholderAuth: {
                    '0': 'No electronic authentication',
                    '1': 'PIN',
                    '2': 'Electronic signature analysis',
                    '3': 'Biometrics',
                    '4': 'Biographic',
                    '5': 'Electronic authentication inoperative',
                    '6': 'Other'
                },
                cardCapture: {
                    '0': 'None',
                    '1': 'Capture'
                },
                operatingEnvironment: {
                    '0': 'No terminal used',
                    '1': 'On premises of card acceptor, attended',
                    '2': 'On premises of card acceptor, unattended',
                    '3': 'Off premises of card acceptor, attended',
                    '4': 'Off premises of card acceptor, unattended',
                    '5': 'On premises of cardholder, attended'
                },
                cardholderPresent: {
                    '0': 'Cardholder present',
                    '1': 'Cardholder not present, unspecified',
                    '2': 'Cardholder not present, mail order',
                    '3': 'Cardholder not present, telephone',
                    '4': 'Cardholder not present, standing authorisation'
                },
                cardPresent: {
                    '0': 'Card not present',
                    '1': 'Card present'
                },
                cardDataInputMode: {
                    '0': 'Unspecified',
                    '1': 'Manual, no terminal',
                    '2': 'Magnetic stripe read',
                    '3': 'Bar code',
                    '4': 'OCR',
                    '5': 'Integrate circuit card (ICC)',
                    '6': 'Key entered',
                    '7': 'Contactless ICC',
                    '8': 'Contactless magnetic stripe'
                },
                cardholderAuthMethod: {
                    '0': 'Not authenticated',
                    '1': 'PIN',
                    '2': 'Electronic signature analysis',
                    '3': 'Biometrics',
                    '4': 'Biographic',
                    '5': 'Manual signature verification',
                    '6': 'Other manual verification'
                },
                cardholderAuthEntity: {
                    '0': 'Not authenticated',
                    '1': 'Integrated circuit card',
                    '2': 'Terminal',
                    '3': 'Authorising agent',
                    '4': 'Merchant',
                    '5': 'Other'
                },
                cardDataOutput: {
                    '0': 'Unknown',
                    '1': 'None',
                    '2': 'Magnetic stripe write',
                    '3': 'Integrate circuit card (ICC)'
                },
                terminalOutput: {
                    '0': 'Unknown',
                    '1': 'None',
                    '2': 'Printing',
                    '3': 'Display',
                    '4': 'Printing and display'
                },
                pinCapture: {
                    '0': 'No PIN capture capability',
                    '1': 'Device PIN capture capability unknown',
                    '4': 'Four characters',
                    '5': 'Five characters',
                    '6': 'Six characters',
                    '7': 'Seven characters',
                    '8': 'Eight characters',
                    '9': 'Nine characters',
                    'A': 'Ten characters',
                    'B': 'Eleven characters',
                    'C': 'Twelve characters'
                },
                terminalOperator: {
                    '0': 'Customer operated',
                    '1': 'Card acceptor operated',
                    '2': 'Administrative'
                },
                terminalType: {
                    '00': 'Administrative terminal',
                    '01': 'POS terminal',
                    '02': 'ATM',
                    '03': 'Home terminal',
                    '04': 'Electronic cash register (ECR)',
                    '05': 'Dial terminal',
                    '06': 'Travellers check machine',
                    '07': 'Fuel machine',
                    '08': 'Scrip machine',
                    '09': 'Coupon machine',
                    '10': 'Ticket machine',
                    '11': 'Point-of-Banking terminal',
                    '12': 'Teller',
                    '13': 'Franchise teller',
                    '14': 'Personal banking',
                    '15': 'Public utility',
                    '16': 'Vending',
                    '17': 'Self-service',
                    '18': 'Authorization',
                    '19': 'Payment',
                    '20': 'VRU',
                    '21': 'Smart phone',
                    '22': 'Interactive television',
                    '23': 'Personal digital assistant',
                    '24': 'Screen phone',
                    '90': 'E-commerce - No encryption; no authentication',
                    '91': 'E-commerce - SET/3D-Secure encryption; cardholder certificate not used (non-authenticated)',
                    '92': 'E-commerce - SET/3D-Secure encryption; cardholder certificate used (authenticated)',
                    '93': 'E-commerce - SET encryption, chip cryptogram used; cardholder certificate not used',
                    '94': 'E-commerce - SET encryption, chip cryptogram used; cardholder certificate used',
                    '95': 'Channel encryption (SSL); cardholder certificate not used (non-authenticated)',
                    '96': 'E-commerce - Channel encryption (SSL); chip cryptogram used, cardholder certificate not used'
                }
            };	
			
            const parsedData = {
                'Pos 1 ': `(${cardData[0]}) ${definitions.cardDataInputCapability[cardData[0]]}`,
                'Pos 2 ': `(${cardData[1]}) ${definitions.cardholderAuth[cardData[1]]}`,
                'Pos 3 ': `(${cardData[2]}) ${definitions.cardCapture[cardData[2]]}`,
                'Pos 4 ': `(${cardData[3]}) ${definitions.operatingEnvironment[cardData[3]]}`,
                'Pos 5 ': `(${cardData[4]}) ${definitions.cardholderPresent[cardData[4]]}`,
                'Pos 6 ': `(${cardData[5]}) ${definitions.cardPresent[cardData[5]]}`,
                'Pos 7 ': `(${cardData[6]}) ${definitions.cardDataInputMode[cardData[6]]}`,
                'Pos 8 ': `(${cardData[7]}) ${definitions.cardholderAuthMethod[cardData[7]]}`,
                'Pos 9 ': `(${cardData[8]}) ${definitions.cardholderAuthEntity[cardData[8]]}`,
                'Pos 10': `(${cardData[9]}) ${definitions.cardDataOutput[cardData[9]]}`,
                'Pos 11': `(${cardData[10]}) ${definitions.terminalOutput[cardData[10]]}`,
                'Pos 12': `(${cardData[11]}) ${definitions.pinCapture[cardData[11]]}`,
                'Pos 13': `(${cardData[12]}) ${definitions.terminalOperator[cardData[12]]}`,
                'Pos 14-15': `(${cardData.substring(13, 15)}) ${definitions.terminalType[cardData.substring(13, 15)]}`
            };

            return parsedData;
        }
	
	function resizeparsedDataOutput() {
			const parsedDataOutput = document.getElementById('parse-output');
			parsedDataOutput.style.height = 'auto';
			parsedDataOutput.style.height = parsedDataOutput.scrollHeight + 'px';
		}
	
	function displayParsedData() {
            const cardData = document.getElementById('de22-input').value;
            
			if (!cardData.trim()) {
				alert("DE22 data is empty. Please enter the data.");
				return;
			}

            const parsedData = parseCardData(cardData);
            let output = '';
            for (const [key, value] of Object.entries(parsedData)) {
                output += `${key} > ${value}\n`;
            }
            document.getElementById('parse-output').value = output;  
			resizeparsedDataOutput();			
        }		
	

    // DE22 Parser
		const posDataDefinitions = {
                '(Pos 1) The card data input capability  of the terminal': {					
                    '0': 'Unknown',
                    '1': 'Manual, no terminal',
                    '2': 'Magnetic stripe read',
                    '3': 'Bar code',
                    '4': 'OCR',
                    '5': 'Integrate circuit card (ICC)',
                    '6': 'Key entered',
                    'A': 'Contactless ICC',
                    'B': 'Contactless magnetic stripe'
                },
                '(Pos 2) The cardholder authentication capability of the terminal': {
                    '0': 'No electronic authentication',
                    '1': 'PIN',
                    '2': 'Electronic signature analysis',
                    '3': 'Biometrics',
                    '4': 'Biographic',
                    '5': 'Electronic authentication inoperative',
                    '6': 'Other'
                },
                '(Pos 3) The card capture capability of the terminal': {
                    '0': 'None',
                    '1': 'Capture'
                },
                '(Pos 4) The operating environment of the terminal': {
                    '0': 'No terminal used',
                    '1': 'On premises of card acceptor, attended',
                    '2': 'On premises of card acceptor, unattended',
                    '3': 'Off premises of card acceptor, attended',
                    '4': 'Off premises of card acceptor, unattended',
                    '5': 'On premises of cardholder, attended'
                },
                '(Pos 5) Indicates whether the cardholder is present': {
                    '0': 'Cardholder present',
                    '1': 'Cardholder not present, unspecified',
                    '2': 'Cardholder not present, mail order',
                    '3': 'Cardholder not present, telephone',
                    '4': 'Cardholder not present, standing authorisation'
                },
                '(Pos 6) Indicates whether the card is present': {
                    '0': 'Card not present',
                    '1': 'Card present'
                },
                '(Pos 7) The actual card data input mode of the transaction': {
                    '0': 'Unspecified',
                    '1': 'Manual, no terminal',
                    '2': 'Magnetic stripe read',
                    '3': 'Bar code',
                    '4': 'OCR',
                    '5': 'Integrate circuit card (ICC)',
                    '6': 'Key entered',
                    '7': 'Contactless ICC',
                    '8': 'Contactless magnetic stripe'
                },
                '(Pos 8) The actual cardholder authentication method of the transaction': {
                    '0': 'Not authenticated',
                    '1': 'PIN',
                    '2': 'Electronic signature analysis',
                    '3': 'Biometrics',
                    '4': 'Biographic',
                    '5': 'Manual signature verification',
                    '6': 'Other manual verification'
                },
                '(Pos 9) The cardholder authentication entity of the transaction': {
                    '0': 'Not authenticated',
                    '1': 'Integrated circuit card',
                    '2': 'Terminal',
                    '3': 'Authorising agent',
                    '4': 'Merchant',
                    '5': 'Other'
                },
                '(Pos 10) The card data output capability of the terminal': {
                    '0': 'Unknown',
                    '1': 'None',
                    '2': 'Magnetic stripe write',
                    '3': 'Integrate circuit card (ICC)'
                },
                '(Pos 11) The terminal output capability of the terminal': {
                    '0': 'Unknown',
                    '1': 'None',
                    '2': 'Printing',
                    '3': 'Display',
                    '4': 'Printing and display'
                },
                '(Pos 12) The PIN capture capability of the terminal': {
                    '0': 'No PIN capture capability',
                    '1': 'Device PIN capture capability unknown',
                    '4': 'Four characters',
                    '5': 'Five characters',
                    '6': 'Six characters',
                    '7': 'Seven characters',
                    '8': 'Eight characters',
                    '9': 'Nine characters',
                    'A': 'Ten characters',
                    'B': 'Eleven characters',
                    'C': 'Twelve characters'
                },
                '(Pos 13) Terminal operator': {
                    '0': 'Customer operated',
                    '1': 'Card acceptor operated',
                    '2': 'Administrative'
                },
                '(Pos 14-15) Terminal type': {
                    '00': 'Administrative terminal',
                    '01': 'POS terminal',
                    '02': 'ATM',
                    '03': 'Home terminal',
                    '04': 'Electronic cash register (ECR)',
                    '05': 'Dial terminal',
                    '06': 'Travellers check machine',
                    '07': 'Fuel machine',
                    '08': 'Scrip machine',
                    '09': 'Coupon machine',
                    '10': 'Ticket machine',
                    '11': 'Point-of-Banking terminal',
                    '12': 'Teller',
                    '13': 'Franchise teller',
                    '14': 'Personal banking',
                    '15': 'Public utility',
                    '16': 'Vending',
                    '17': 'Self-service',
                    '18': 'Authorization',
                    '19': 'Payment',
                    '20': 'VRU',
                    '21': 'Smart phone',
                    '22': 'Interactive television',
                    '23': 'Personal digital assistant',
                    '24': 'Screen phone',
                    '90': 'E-commerce - No encryption; no authentication',
                    '91': 'E-commerce - SET/3D-Secure encryption; cardholder certificate not used (non-authenticated)',
                    '92': 'E-commerce - SET/3D-Secure encryption; cardholder certificate used (authenticated)',
                    '93': 'E-commerce - SET encryption, chip cryptogram used; cardholder certificate not used',
                    '94': 'E-commerce - SET encryption, chip cryptogram used; cardholder certificate used',
                    '95': 'Channel encryption (SSL); cardholder certificate not used (non-authenticated)',
                    '96': 'E-commerce - Channel encryption (SSL); chip cryptogram used, cardholder certificate not used'
                }
			};	
	
	function resizeOutputBox() {
			const DefinitionsOutput = document.getElementById('DefinitionsOutput');							
			DefinitionsOutput.style.height = 'auto';
			DefinitionsOutput.style.height = DefinitionsOutput.scrollHeight + 'px';		
        }
	
function displayDefinitions() {
    const existingContainer = document.getElementById('definitionsContainer');
    const button = document.getElementById('definitionButton');

    if (existingContainer) {
        existingContainer.remove();
        button.textContent = 'Show Definitions';
    } else {
        const container = document.createElement('div');
        container.id = 'definitionsContainer';
        container.style.position = 'absolute';
        container.style.bottom = '80px';
        container.style.left = '30px';
		container.style.right = '30px';
        container.style.height = '40%';
		container.style.height = container.scrollHeight + '40%';
        container.style.overflowY = 'auto';
        container.style.backgroundColor = '#f9f9f9';
        container.style.border = '1px solid #ccc';
        container.style.padding = '15px';
        container.style.width = 'auto'; // Wider to accommodate 3 columns
        container.style.zIndex = '1000';
        container.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
        container.style.fontFamily = 'monospace';
        container.style.fontSize = '10px';
        container.style.display = 'flex';
        container.style.flexWrap = 'wrap';
        container.style.gap = '15px';		
		container.style.borderRadius  = '5px';

 
        for (const [title, definitions] of Object.entries(posDataDefinitions)) {
            const section = document.createElement('div');
            section.style.flex = '1 1 calc(33.333% - 10px)';
            section.style.boxSizing = 'border-box';
            section.style.marginBottom = '10px';

            const heading = document.createElement('strong');
            heading.textContent = title;
            section.appendChild(heading);

            const list = document.createElement('ul');
            list.style.margin = '5px 0 0 15px';
            list.style.padding = '0';

            for (const [code, meaning] of Object.entries(definitions)) {
                const item = document.createElement('li');
                item.textContent = `${code}: ${meaning}`;
                list.appendChild(item);
            }

            section.appendChild(list);
            container.appendChild(section);
        }

        document.body.appendChild(container);
        button.textContent = 'Hide Definitions';
    }
}

	// AXL parser	
	function formatTableRows(data, indentLevel = 0) {
            let rows = '';
            const indent = '&nbsp;'.repeat(indentLevel * 4);

            for (const key in data) {
                if (data.hasOwnProperty(key)) {
                    const value = data[key];
                    if (typeof value === 'object' && value !== null) {
                        rows += `<tr><td>${indent}${key}</td><td></td></tr>`;
                        rows += formatTableRows(value, indentLevel + 1);
                    } else {
                        rows += `<tr><td>${indent}${key}</td><td>${value}</td></tr>`;
                    }
                }
            }
            return rows;
        }

        function copyTable() {
            const table = document.querySelector('#json-output table');
            if (table) {
                const range = document.createRange();
                range.selectNode(table);
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(range);
                document.execCommand('copy');
                window.getSelection().removeAllRanges();
                //alert('Table copied to clipboard!');
				showAlert(`Table copied to clipboard!`,"success");				
            } else {
                //alert('No table to copy');
				showAlert(`Oops!  No table to copy`,"error");
            }
        }      
	
	function generateTable(data) {
            let table = '<table><thead><tr><th class="key-column">Key</th><th class="value-column">Value</th></thead><tbody>';
            table += formatTableRows(data);
            table += '</tbody></table>';
            return table;
        }
		
		
		
        function parseAXL() {
            const input = document.getElementById('json-input').value;
            const output = document.getElementById('json-output');
            const copyButton = document.getElementById('copy-button');
            try {
                const jsonData = JSON.parse(input);
                if (jsonData.event && jsonData.event.resource) {
                    output.innerHTML = generateTable(jsonData.event.resource);
					output.style.display = 'block'; // Show the copy button
                    copyButton.style.display = 'block'; // Show the copy button
                } else {
                    output.textContent = 'No resource key found in the JSON data';
                    copyButton.style.display = 'none'; // Hide the copy button
                }
				
            } catch (e) {
                //output.textContent = 'Invalid JSON data';
				showAlert(`Invalid format`,"error");
				output.style.display = 'none'; // Show the copy button
                copyButton.style.display = 'none'; // Hide the copy button
            }
        }
	
	
	var tagsList = {
			_06: "Object Identifier (OID)",
			_41: "Country code and national data",
			_42: "Issuer Identification Number (IIN)",
			_43: "Card service data",
			_44: "Initial access data",
			_45: "Card issuer`s data",
			_46: "Pre-issuing data",
			_47: "Card capabilities",
			_48: "Status information",
			_4D: "Extended header list",
			_4F: "Application Identifier",
			_50: "Application Label",
			_51: "Path",
			_52: "Command to perform",
			_53: "Discretionary data",
			_56: "Track 1 Data",
			_56: "Track 1 Equivalent Data",
			_57: "Track 2 Equivalent Data",
			_58: "Track 3 Equivalent Data",
			_59: "Card expiration date",
			_5A: "Application Primary Account Number (PAN)",
			_5B: "Name of an individual",
			_5C: "Tag list",
			_5D: "Deleted",
			_5D: "Header list",
			_5E: "Proprietary login data",
			_5F20: "Cardholder Name",
			_5F21: "Track 1",
			_5F22: "Track 2",
			_5F23: "Track 3",
			_5F24: "Application Expiration Date",
			_5F25: "Application Effective Date",
			_5F26: "Date, Card Effective",
			_5F27: "Interchange control",
			_5F28: "Issuer Country Code",
			_5F29: "Interchange profile",
			_5F2A: "Transaction Currency Code",
			_5F2B: "Date of birth",
			_5F2C: "Cardholder nationality",
			_5F2D: "Language Preference",
			_5F2E: "Cardholder biometric data",
			_5F2F: "PIN usage policy",
			_5F30: "Service Code",
			_5F32: "Transaction counter",
			_5F33: "Date, Transaction",
			_5F34: "Application PAN Sequence Number (APSN)",
			_5F35: "Sex (ISO 5218)",
			_5F36: "Transaction Currency Exponent",
			_5F37: "Static internal authentication (one-step)",
			_5F38: "Static internal authentication - first associated data",
			_5F39: "Static internal authentication - second associated data",
			_5F3A: "Dynamic internal authentication",
			_5F3B: "Dynamic external authentication",
			_5F3C: "Transaction Reference Currency Code",
			_5F3C: "Dynamic mutual authentication",
			_5F3D: "Transaction Reference Currency Exponent",
			_5F40: "Cardholder portrait image",
			_5F41: "Element list",
			_5F42: "Address",
			_5F43: "Cardholder handwritten signature image",
			_5F44: "Application image",
			_5F45: "Display message",
			_5F46: "Timer",
			_5F47: "Message reference",
			_5F48: "Cardholder private key",
			_5F49: "Cardholder public key",
			_5F4A: "Public key of certification authority",
			_5F4B: "Deprecated (see note 2 below)",
			_5F4C: "Certificate holder authorization",
			_5F4D: "Integrated circuit manufacturer identifier",
			_5F4E: "Certificate content",
			_5F50: "Issuer Uniform resource locator (URL)",
			_5F53: "International Bank Account Number (IBAN)",
			_5F54: "Bank Identifier Code (BIC)",
			_5F55: "Issuer Country Code (alpha2 format)",
			_5F56: "Issuer Country Code (alpha3 format)",
			_5F57: "Account Type",
			_60: "Template, Dynamic Authentication",
			_6080: "Commitment ",
			_6081: "Challenge",
			_6082: "Response",
			_6083: "Committed challenge",
			_6084: "Authentication code",
			_6085: "Exponential",
			_60A0: "Template, Identification data",
			_61: "Application Template",
			_61: "Directory Entry",
			_62: "File Control Parameters (FCP) Template",
			_6280: "Number of data bytes in the file, excluding structural information",
			_6281: "Number of data bytes in the file, including structural information if any",
			_6282: "File descriptor byte",
			_6283: "File identifier",
			_6284: "DF name",
			_6285: "Proprietary information, primitive encoding (i.e., not coded in BER-TLV)",
			_6286: "Security attribute in proprietary format",
			_6287: "Identifier of an EF containing an extension of the file control information",
			_6288: "Short EF identifier",
			_628A: "Life cycle status byte (LCS)",
			_628B: "Security attribute referencing the expanded format",
			_628C: "Security attribute in compact format",
			_628D: "Identifier of an EF containing security environment templates",
			_62A0: "Template, Security attribute for data objects",
			_62A1: "Template, Security attribute for physical interfaces",
			_62A2: "One or more pairs of data objects, short EF identifier (tag 88) - absolute or relative path (tag 51)",
			_62A5: "Proprietary information, constructed encoding",
			_62AB: "Security attribute in expanded format",
			_62AC: "Identifier of a cryptographic mechanism",
			_63: "Wrapper",
			_64: "Template, File Management Data (FMD)",
			_65: "Cardholder related data",
			_66: "Template, Card data",
			_67: "Template, Authentication data",
			_68: "Special user requirements",
			_6A: "Template, Login",
			_6A80: "Qualifier",
			_6A81: "Telephone Number",
			_6A82: "Text",
			_6A83: "Delay indicators, for detecting an end of message",
			_6A84: "Delay indicators, for detecting an absence of response",
			_6B: "Template, Qualified name",
			_6B06: "Qualified name",
			_6B80: "Name",
			_6BA0: "Name",
			_6C: "Template, Cardholder image",
			_6D: "Template, Application image",
			_6E: "Application related data",
			_6F: "File Control Information (FCI) Template",
			_6FA5: "Template, FCI A5",
			_70: "READ RECORD Response Message Template",
			_71: "Issuer Script Template",
			_7186: "Issuer Script Command",
			_719F18: "Issuer Script Identifier",
			_72: "Issuer Script Template 2",
			_73: "Directory Discretionary Template",
			_77: "Response Message Template Format 2",
			_78: "Compatible Tag Allocation Authority",
			_79: "Coexistent Tag Allocation Authority",
			_7A: "Template, Security Support (SS)",
			_7A80: "Card session counter",
			_7A81: "Session identifier",
			_7A82: "File selection counter",
			_7A83: "File selection counter",
			_7A84: "File selection counter",
			_7A85: "File selection counter",
			_7A86: "File selection counter",
			_7A87: "File selection counter",
			_7A88: "File selection counter",
			_7A89: "File selection counter",
			_7A8A: "File selection counter",
			_7A8B: "File selection counter",
			_7A8C: "File selection counter",
			_7A8D: "File selection counter",
			_7A8E: "File selection counter",
			_7A93: "Digital signature counter",
			_7A9F2X: "Internal progression value",
			_7A9F3Y: "External progression value",
			_7B: "Template, Security Environment",
			_7B80: "SEID byte, mandatory",
			_7B8A: "LCS byte, optional",
			_7BAC: "Cryptographic mechanism identifier template, optional",
			_7BA4: "Control reference template (CRT)",
			_7BAA: "Control reference template (CRT)",
			_7BB4: "Control reference template (CRT)",
			_7BB6: "Control reference template (CRT)",
			_7BB8: "Control reference template (CRT)",
			_7D: "Template, Secure Messaging (SM)",
			_7D80: "Plain value not coded in BER-TLV",
			_7D81: "Plain value not coded in BER-TLV",
			_7D82: "Cryptogram",
			_7D83: "Cryptogram",
			_7D84: "Cryptogram",
			_7D85: "Cryptogram",
			_7D86: "Padding-content indicator byte followed by cryptogram",
			_7D87: "Padding-content indicator byte followed by cryptogram",
			_7D8E: "Cryptographic checksum (at least four bytes)",
			_7D90: "Hash-code",
			_7D91: "Hash-code",
			_7D92: "Certificate (not BER-TLV coded data)",
			_7D93: "Certificate (not BER-TLV coded data)",
			_7D94: "Security environment identifier",
			_7D95: "Security environment identifier",
			_7D96: "Number Le in the unsecured command APDU",
			_7D97: "Number Le in the unsecured command APDU",
			_7D99: "Processing status of the secured response APDU",
			_7D9A: "Input data element for the computation of a digital signature",
			_7D9B: "Input data element for the computation of a digital signature",
			_7D9C: "Public key",
			_7D9D: "Public key",
			_7D9E: "Digital signature",
			_7DA0: "Input template for the computation of a hash-code",
			_7DA1: "Input template for the computation of a hash-code",
			_7DA2: "Input template for the verification of a cryptographic checksum",
			_7DA4: "Control reference template for authentication (AT)",
			_7DA5: "Control reference template for authentication (AT)",
			_7DA8: "Input template for the verification of a digital signature",
			_7DAA: "Template, Control reference for hash-code (HT)",
			_7DAB: "Template, Control reference for hash-code (HT)",
			_7DAC: "Input template for the computation of a digital signature",
			_7DAD: "Input template for the computation of a digital signature",
			_7DAE: "Input template for the computation of a certificate",
			_7DAF: "Input template for the computation of a certificate",
			_7DB0: "Plain value coded in BER-TLV and including secure messaging data objects",
			_7DB1: "Plain value coded in BER-TLV and including secure messaging data objects",
			_7DB2: "Plain value coded in BER-TLV, but not including secure messaging data objects",
			_7DB3: "Plain value coded in BER-TLV, but not including secure messaging data objects",
			_7DB4: "Control reference template for cryptographic checksum (CCT)",
			_7DB5: "Control reference template for cryptographic checksum (CCT)",
			_7DB6: "Control reference template for digital signature (DST)",
			_7DB7: "Control reference template for digital signature (DST)",
			_7DB8: "Control reference template for confidentiality (CT)",
			_7DB9: "Control reference template for confidentiality (CT)",
			_7DBA: "Response descriptor template",
			_7DBB: "Response descriptor template",
			_7DBC: "Input template for the computation of a digital signature",
			_7DBD: "Input template for the computation of a digital signature",
			_7DBE: "Input template for the verification of a certificate (the template is certified)",
			_7E: "Template, Nesting Interindustry data objects",
			_7F20: "Display control template",
			_7F21: "Cardholder certificate",
			_7F2E: "Biometric data template",
			_7F49: "Template, Cardholder public key",
			_7F4980: "Algorithm reference",
			_7F4981: "RSA Modulus",
			_7F4982: "RSA Public exponent",
			_7F4983: "DSA Basis",
			_7F4984: "DSA Public key",
			_7F4985: "ECDSA Order",
			_7F4986: "ECDSA Public key",
			_7F4C: "Template, Certificate Holder Authorization",
			_7F4E: "Certificate Body",
			_7F4E42: "Certificate Authority Reference",
			_7F4E5F20: "Certificate Holder Reference",
			_7F4E5F24: "Expiration Date, Certificate",
			_7F4E5F25: "Effective Date, Certificate",
			_7F4E5F29: "Certificate Profile Identifier",
			_7F4E65: "Certificate Extensions",
			_7F60: "Template, Biometric information",
			_80: "Response Message Template Format 1",
			_81: "Amount, Authorised (Binary)",
			_82: "Application Interchange Profile (AIP)",
			_83: "Command Template",
			_84: "Dedicated File (DF) Name",
			_86: "Issuer Script Command",
			_87: "Application Priority Indicator",
			_88: "Short File Identifier (SFI)",
			_89: "Authorisation Code",
			_8A: "Authorisation Response Code (ARC)",
			_8C: "Card Risk Management Data Object List 1 (CDOL1)",
			_8D: "Card Risk Management Data Object List 2 (CDOL2)",
			_8E: "Cardholder Verification Method (CVM) List",
			_8F: "Certification Authority Public Key Index (PKI)",
			_90: "Issuer Public Key Certificate",
			_91: "Issuer Authentication Data",
			_92: "Issuer Public Key Remainder",
			_93: "Signed Static Application Data (SAD)",
			_94: "Application File Locator (AFL)",
			_95: "Terminal Verification Results (TVR)",
			_97: "Transaction Certificate Data Object List (TDOL)",
			_98: "Transaction Certificate (TC) Hash Value",
			_99: "Transaction Personal Identification Number (PIN) Data",
			_9A: "Transaction Date",
			_9B: "Transaction Status Information (TSI)",
			_9C: "Transaction Type",
			_9D: "Directory Definition File (DDF) Name",
			_9F01: "Acquirer Identifier",
			_9F02: "Amount, Authorised (Numeric)",
			_9F03: "Amount, Other (Numeric)",
			_9F04: "Amount, Other (Binary)",
			_9F05: "Application Discretionary Data",
			_9F06: "Application Identifier (AID), Terminal",
			_9F07: "Application Usage Control (AUC)",
			_9F08: "Application Version Number, Card",
			_9F09: "Application Version Number, Terminal",
			_9F0B: "Cardholder Name - Extended",
			_9F0D: "Issuer Action Code - Default",
			_9F0E: "Issuer Action Code - Denial",
			_9F0F: "Issuer Action Code - Online",
			_9F10: "Issuer Application Data (IAD)",
			_9F11: "Issuer Code Table Index",
			_9F12: "Application Preferred Name",
			_9F13: "Last Online Application Transaction Counter (ATC) Register",
			_9F14: "Lower Consecutive Offline Limit (LCOL)",
			_9F15: "Merchant Category Code (MCC)",
			_9F16: "Merchant Identifier",
			_9F17: "Personal Identification Number (PIN) Try Counter",
			_9F18: "Issuer Script Identifier",
			_9F19: "Deleted (see 9F49)",
			_9F1A: "Terminal Country Code",
			_9F1B: "Terminal Floor Limit",
			_9F1C: "Terminal Identification",
			_9F1D: "Terminal Risk Management Data",
			_9F1E: "Interface Device (IFD) Serial Number",
			_9F1F: "Track 1 Discretionary Data",
			_9F20: "Track 2 Discretionary Data",
			_9F21: "Transaction Time",
			_9F22: "Certification Authority Public Key Index (PKI)",
			_9F22: "Public Key Index, Certification Authority, Terminal",
			_9F23: "Upper Consecutive Offline Limit (UCOL)",
			_9F24: "Payment Account Reference (PAR) generated or linked directly to the provision request in the token vault",
			_9F26: "Application Cryptogram (AC)",
			_9F27: "Cryptogram Information Data (CID)",
			_9F29: "Extended Selection",
			_9F2A: "Kernel Identifier",
			_9F2D: "Integrated Circuit Card (ICC) PIN Encipherment Public Key Certificate",
			_9F2E: "Integrated Circuit Card (ICC) PIN Encipherment Public Key Exponent",
			_9F2F: "Integrated Circuit Card (ICC) PIN Encipherment Public Key Remainder",
			_9F32: "Issuer Public Key Exponent",
			_9F33: "Terminal Capabilities",
			_9F34: "CVM Results",
			_9F35: "Terminal Type",
			_9F36: "Application Transaction Counter (ATC)",
			_9F37: "Unpredictable Number (UN)",
			_9F38: "Processing Options Data Object List (PDOL)",
			_9F39: "Point-of-Service (POS) Entry Mode",
			_9F3A: "Amount, Reference Currency (Binary)",
			_9F3B: "Currency Code, Application Reference",
			_9F3C: "Currency Code, Transaction Reference",
			_9F3D: "Currency Exponent, Transaction Reference",
			_9F40: "Additional Terminal Capabilities (ATC)",
			_9F41: "Transaction Sequence Counter",
			_9F42: "Currency Code, Application",
			_9F43: "Currency Exponent, Application Reference",
			_9F44: "Currency Exponent, Application",
			_9F45: "Data Authentication Code",
			_9F46: "Integrated Circuit Card (ICC) Public Key Certificate",
			_9F47: "Integrated Circuit Card (ICC) Public Key Exponent",
			_9F48: "Integrated Circuit Card (ICC) Public Key Remainder",
			_9F49: "Dynamic Data Authentication Data Object List (DDOL)",
			_9F4A: "Static Data Authentication Tag List (SDA)",
			_9F4B: "Signed Dynamic Application Data (SDAD)",
			_9F4C: "ICC Dynamic Number",
			_9F4D: "Log Entry",
			_9F4E: "Merchant Name and Location",
			_9F4F: "Log Format",
			_9F50: "Offline Accumulator Balance",
			_9F51: "Application Currency Code",
			_9F52: "Application Default Action (ADA)",
			_9F53: "Consecutive Transaction Counter International Limit (CTCIL)",
			_9F53: "Transaction Category Code",
			_9F54: "Cumulative Total Transaction Amount Limit (CTTAL)",
			_9F54: "DS ODS Card",
			_9F55: "Issuer Authentication Flags",
			_9F56: "Issuer Authentication Indicator",
			_9F57: "Issuer Country Code",
			_9F58: "Consecutive Transaction Counter Limit (CTCL)",
			_9F59: "Consecutive Transaction Counter Upper Limit (CTCUL)",
			_9F5A: "Application Program Identifier (Program ID)",
			_9F5B: "Issuer Script Results",
			_9F5C: "Cumulative Total Transaction Amount Upper Limit (CTTAUL)",
			_9F5D: "Available Offline Spending Amount (AOSA)",
			_9F5E: "Consecutive Transaction International Upper Limit (CTIUL)",
			_9F5F: "Offline Balance",
			_9F60: "CVC3 (Track1)",
			_9F61: "CVC3 (Track2)",
			_9F62: "PCVC3 (Track1)",
			_9F62: "Encrypted PIN",
			_9F63: "Offline Counter Initial Value",
			_9F64: "NATC (Track1)",
			_9F65: "PCVC3 (Track2)",
			_9F66: "Terminal Transaction Qualifiers (TTQ)",
			_9F67: "MSD Offset",
			_9F68: "Card Additional Processes",
			_9F69: "Card Authentication Related Data",
			_9F6A: "Unpredictable Number (Numeric)",
			_9F6B: "Card CVM Limit",
			_9F6C: "Card Transaction Qualifiers (CTQ)",
			_9F6D: "Mag-stripe Application Version Number",
			_9F6E: "Form Factor Indicator (FFI)",
			_9F6F: "DS Slot Management Control",
			_9F70: "Card Interface Capabilities",
			_9F71: "Mobile CVM Results",
			_9F72: "Consecutive Transaction Limit",
			_9F73: "Currency Conversion Parameters",
			_9F74: "VLP Issuer Authorisation Code",
			_9F75: "Cumulative Total Transaction Amount Limit",
			_9F76: "Secondary Application Currency Code",
			_9F77: "VLP Funds Limit",
			_9F78: "VLP Single Transaction Limit",
			_9F79: "VLP Available Funds",
			_9F7A: "VLP Terminal Support Indicator",
			_9F7B: "VLP Terminal Transaction Limit",
			_9F7C: "Customer Exclusive Data (CED)",
			_9F7D: "VISA Applet Data",
			_9F7E: "Mobile Support Indicator",
			_9F7F: "Card Production Life Cycle (CPLC) Data"
		};
	
	
	function generateISOTable(json, isRequest) {
  let table = '<table><tr><th class="field-column-fixed">Field</th><th>Value</th></tr>';

  for (const key in json) {
    if (json.hasOwnProperty(key)) {
      let value = json[key];

      // If key is "002", remove the first two digits
      if (key === "002") {
        value = String(value);
        if (value.length >= 2) {
          value = value.substring(2);
        }
      }

      // Only convert to ASCII if it's a request and key is in the list
      const asciiKeys = ["037", "041", "042", "043", "047"];
      if (isRequest && asciiKeys.includes(key)) {
        value = hexToAscii(String(value));
      }

		
	// If key is DE55, include raw value first, then TLV table
if (key === "055") {
  let rawValue = String(value);

  // Remove first six digits if it's a request message
  if (isRequest && rawValue.length >= 6) {
    rawValue = rawValue.substring(6);
  }

  // Parse TLV
  const tlvTable = parseTLV(rawValue);

  // Combine raw value and TLV table in one cell
  value = `<div><strong>Raw:</strong> ${String(value)}</div><div style="margin-top:8px; overflow:auto;">${tlvTable}</div>`;
}




      table += `<tr><td>${key}</td><td>${value}</td></tr>`;
    }
  }

  table += '</table>';
  return table;
}


// Helper function to convert hex string to ASCII
function hexToAscii(hex) {
  let ascii = '';
  for (let i = 0; i < hex.length; i += 2) {
    const part = hex.substr(i, 2);
    ascii += String.fromCharCode(parseInt(part, 16));
  }
  return ascii;
}

function parseTLV(hex) {
  let i = 0;
  let table = '<table style="width: 100%; border-collapse: collapse; "  border="1">';
  table += '<tr><th class="tag-column-fixed">Tag</th><th class="field-column-fixed">Length (Byte) </th><th>Value</th></tr>';

  while (i < hex.length) {
    // Parse Tag
    let tag = hex.substr(i, 2);
    i += 2;
    if ((parseInt(tag, 16) & 0x1F) === 0x1F) {
      tag += hex.substr(i, 2);
      i += 2;
    }

	
	// Lookup tag name and format display
    const tagKey = "_" + tag.toUpperCase();
    const tagName = tagsList[tagKey];
    //const tagDisplay = tagName ? `${tag}<br><small>${tagName}</small>` : tag;	
	const tagDisplay = tagName ? `${tag}<br><small><i>${tagName}</i></small>` : tag;


    // Parse Length
    let lengthByte = parseInt(hex.substr(i, 2), 16);    
	let lengthDisplay = hex.substr(i, 2); // Keep original hex string for display
    i += 2;

    let length = lengthByte;
    if (lengthByte & 0x80) {
      const numBytes = lengthByte & 0x7F;
      length = parseInt(hex.substr(i, numBytes * 2), 16);
      lengthDisplay = hex.substr(i, numBytes * 2); // Update display value
      i += numBytes * 2;
    }


    // Parse Value
    const value = hex.substr(i, length * 2);
    i += length * 2;

    table += `<tr><td>${tagDisplay}</td><td>${lengthDisplay}</td><td>${value}</td></tr>`;
  }

  table += '</table>';
  return table;
}
	
	function parseCombined() {
  const input = document.getElementById('combinedInput').value;

  const requestMatch = input.match(/Request\s*:\s*.*?Breakdown\s*:\s*(\{[\s\S]*?\})/i);
  const responseMatch = input.match(/Response\s*:\s*.*?Breakdown\s*:\s*(\{[\s\S]*?\})/i);

  const requestTable = document.getElementById('requestTable');
  const responseTable = document.getElementById('responseTable');

  requestTable.innerHTML = '';
  responseTable.innerHTML = '';

	

  try {
  // Attempt to parse the request JSON from the matched string
  const requestJSON = requestMatch ? JSON.parse(requestMatch[1]) : null;

  // Check if the parsed JSON is valid and generate the table
  if (requestJSON) {
    requestTable.innerHTML = generateISOTable(requestJSON, true); // true indicates it's a request
	document.getElementById('tabWrapper').style.display = 'block'
  } else {
    requestTable.innerHTML = '<p>No valid request JSON found.</p>';
  }
} catch (error) {
  // Handle any parsing errors
  requestTable.innerHTML = '<p>Invalid JSON in request.</p>';
  console.error('Error parsing request JSON:', error);
}

try {
  // Attempt to parse the response JSON from the matched string
  const responseJSON = responseMatch ? JSON.parse(responseMatch[1]) : null;

  // Check if the parsed JSON is valid and generate the table
  if (responseJSON) {
    responseTable.innerHTML = generateISOTable(responseJSON, false); // false indicates it's a response
	document.getElementById('tabWrapper').style.display = 'block'
  } else {
    responseTable.innerHTML = '<p>No valid response JSON found.</p>';
  }
} catch (error) {
  // Handle any parsing errors
  responseTable.innerHTML = '<p>Invalid JSON in response.</p>';
  console.error('Error parsing response JSON:', error);
}

  
  
// Show all elements with class "table-box"
    const tableBoxes = document.querySelectorAll('.table-box');
    tableBoxes.forEach(box => {
      box.style.display = 'block';
    });

}
	
function showTab(tabId) {
    const tabs = document.querySelectorAll('.tab');
    const contents = document.querySelectorAll('.tab-content');

    tabs.forEach(tab => tab.classList.remove('active'));
    contents.forEach(content => content.style.display = 'none');

    document.querySelector(`.tab[onclick*="${tabId}"]`).classList.add('active');
    document.getElementById(tabId).style.display = 'block';
  }	
 

document.addEventListener('DOMContentLoaded', () => {
	
const recordTagValues = {
    "A Record": {
      "defaultAccount": ["10", "20", "30"]
    },
    "X Record": {
      "defaultAccount": ["10", "20", "30"]
    },
    "C Record": {
      "cardSaleEnable": ["true", "false"],
      "cardCashEnable": ["true", "false"],
      "cardVoidCashEnable": ["true", "false"],
      "enabled": ["true", "false"],
      "emvEnabled": ["true", "false"],
      "clessEnabled": ["true", "false"],
      "manualEnabled": ["true", "false"],
      "swipeEnabled": ["true", "false"],
      "txnAuthorityRequirement": ["PIN_MANDATORY", "PIN_OR_SIGNATURE", "SIGNATURE_MANDATORY_NO_PIN"],
      "magstripePinRequired": ["true", "false"],
      "manualPinRequired": ["true", "false"],
      "cardPinBypassEnable": ["true", "false"],
      "cvcPrompt": ["OFF", "MANUAL_ENTRY", "MANUAL_AND_SWIPED", "CARD_NOT_PRESENT", "ECOMMERCE_PHONE_ORDER"],
      "cvvBypassCheck": ["NO_CHECK", "UNREADABLE_AND_NOT_PRESENT_OPTIONS", "UNREADABLE_AND_NOT_PRESENT_AND_BYPASS_OPTIONS"],
      "checkSvc": ["true", "false"],
      "luhnCheckMode": ["OFF", "MANUAL", "MANUAL_SWIPE", "SWIPE", "OFFLINE_ONLY"],
      "expDateCheckMode": ["OFF", "MANUAL", "MANUAL_SWIPE", "SWIPE", "ALL", "OFFLINE_ONLY"],
      "accountGroupingCodeOnline": ["1", "2", "3"],
      "accountGroupingCodeOffline": ["1", "2", "3"],
      "addressVerification": ["OFF", "ZIP_CODE", "ZIP_CODE_ADDRS", "ADDRS"],
      "addressVerificationSwipe": ["OFF", "ZIP_CODE", "ZIP_CODE_ADDRS", "ADDRS"]
    }
  };


	
function populateDropdownsFromSections() {
  const recordSelect = document.getElementById('recordSelect');
  const tagSelect = document.getElementById('tagSelect');
  const valueSelect = document.getElementById('valueSelect');

	const selector = document.getElementById('recordSelect');
    
	if (selector) {
        // Clear existing options
        selector.innerHTML = '';

        // Add A, X, C Record options
        const options = [
            { value: 'A', text: 'A Record' },
            { value: 'X', text: 'X Record' },
            { value: 'C', text: 'C Record' }
        ];

        options.forEach(opt => {
            const option = document.createElement('option');
            option.value = opt.value;
            option.textContent = opt.text;
            selector.appendChild(option);
        });
    }


	

  // Update Tags when Record changes
  recordSelect.addEventListener('change', () => {
    const selectedRecord = recordSelect.options[recordSelect.selectedIndex].textContent;
    const tags = Object.keys(recordTagValues[selectedRecord] || {});
    tagSelect.innerHTML = '';
    tags.forEach(tag => {
      const option = document.createElement('option');
      option.value = tag;
      option.textContent = tag;
      tagSelect.appendChild(option);
    });

    tagSelect.dispatchEvent(new Event('change'));
  });

  // Update Values when Tag changes
  tagSelect.addEventListener('change', () => {
    const selectedRecord = recordSelect.options[recordSelect.selectedIndex].textContent;
    const selectedTag = tagSelect.value;
    const values = recordTagValues[selectedRecord]?.[selectedTag] || [];

    valueSelect.innerHTML = '';
    values.forEach(val => {
      const option = document.createElement('option');
      option.value = val;
      option.textContent = val;
      valueSelect.appendChild(option);
    });
  });

  // Trigger initial population
  recordSelect.dispatchEvent(new Event('change'));
}



  function toggleContentById(id) {
    const el = document.getElementById(id);
    if (el) {
      el.style.display = el.style.display === 'none' ? 'block' : 'none';
    }
  }



function parseHostRecord() {
  const raw = document.getElementById('inputRecord')?.value;
  const output = document.getElementById('output');
  if (!output) {
    console.error("Output container not found.");
    return;
  }

  output.innerHTML = '';

  let data;
  try {
    data = JSON.parse(raw);
  } catch (e) {
    //output.innerHTML = '<p style="color:red;">Invalid JSON format.</p>';
	showAlert('Invalid format','error');
	
    return;
  }

  const sections = {
    'K Record': data.capkDataList || [],
    'A Record': data.hostAllCardConfigs?.contactConfigs || [],
    'X Record': data.hostAllCardConfigs?.clessConfig || [],
    'C Record': Array.isArray(data.hostAllCardConfigs?.cardConfigs)
      ? data.hostAllCardConfigs.cardConfigs
      : []
  };

  let sectionCounter = 0;
  for (const [title, records] of Object.entries(sections)) {
    const sectionId = `section-${sectionCounter++}`;
    const section = document.createElement('div');
    section.className = 'section';

    const sectionHeader = document.createElement('div');
    sectionHeader.className = 'section-header';
    sectionHeader.textContent = title;

    const sectionContent = document.createElement('div');
    sectionContent.className = 'section-content';
    sectionContent.id = sectionId;

    sectionHeader.onclick = () => toggleContentById(sectionId);

    if (Array.isArray(records) && records.length > 0) {
      records.forEach((record, index) => {
        if (typeof record !== 'object' || record === null) return;

        const recordDiv = document.createElement('div');
        recordDiv.className = 'record';
        recordDiv.setAttribute('data-section', title);
        recordDiv.style.marginLeft = '30px';

        const recordId = `${sectionId}-record-${index}`;
        const header = document.createElement('div');
        header.className = 'record-header';

        if (title === 'K Record' && record.rid && record.ridIndex) {
          header.textContent = `${record.rid} (${record.ridIndex})`;
        } else if ((title === 'A Record' || title === 'X Record') && record.recommendedAppName && record.currencyLabel) {
          header.textContent = `${record.recommendedAppName} (${record.currencyLabel})`;
        } else if (
          title === 'C Record' &&
          record.binRangeLow != null &&
          record.binRangeHigh != null &&
          record.cardScheme
        ) {
          header.textContent = `${record.binRangeLow}-${record.binRangeHigh} (${record.cardScheme})`;
        } else {
          header.textContent = `${title} Record ${index + 1}`;
        }

        const content = document.createElement('div');
        content.className = 'record-content';
        content.id = recordId;

        const fieldContent = document.createElement('div');
        fieldContent.className = 'field-content';

        for (const [key, value] of Object.entries(record)) {
          const fieldDiv = document.createElement('div');
          fieldDiv.className = 'record-field';

          const keySpan = document.createElement('span');
          keySpan.className = 'key';
          keySpan.textContent = `${key}`;

          const colonSpan = document.createElement('span');
          colonSpan.className = 'colon';
          colonSpan.textContent = ': ';

          const valueSpan = document.createElement('span');
          valueSpan.className = 'value';
          valueSpan.textContent = value;

          fieldDiv.appendChild(keySpan);
          fieldDiv.appendChild(colonSpan);
          fieldDiv.appendChild(valueSpan);
          fieldContent.appendChild(fieldDiv);
        }

        content.appendChild(fieldContent);
        recordDiv.appendChild(header);
        recordDiv.appendChild(content);
        sectionContent.appendChild(recordDiv);
      });
    } else {
      sectionContent.innerHTML = '<p>No valid records found.</p>';
    }

    section.appendChild(sectionHeader);
    section.appendChild(sectionContent);
    output.appendChild(section);
  }

  populateDropdownsFromSections();
}




  window.parseHostRecord = parseHostRecord;
});


// record parser
 function loadFileContent(event) {
    const file = event.target.files[0];
    if (!file) return;

    const allowedTypes = ['application/json', 'text/plain'];
    const isAllowed = allowedTypes.includes(file.type) || file.name.match(/\\.(json|txt)$/i);

    if (!isAllowed) {
        alert("Only .txt or .json files are allowed.");
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
        const content = e.target.result;
        const textarea = document.getElementById('inputRecord');
        if (textarea) {
            textarea.value = content;
			parseHostRecord();
        } else {
            console.error("Textarea with ID 'inputRecord' not found.");
        }
    };
    reader.readAsText(file);
}

document.addEventListener('click', function (event) {
  const recordHeader = event.target.closest('.record-header');
  

  // Handle record header click
  
if (recordHeader) {
    const recordContent = recordHeader.nextElementSibling;
    if (recordContent) {
      recordContent.style.display = recordContent.style.display === 'block' ? 'none' : 'block';
    }
  }


});	
	
function findRecord() {

	
const inputRecord = document.getElementById('inputRecord')?.value?.trim();

  if (!inputRecord) {
    showAlert("Oops! Host Record data is empty", "warning");
    return; // Stop the function if input is empty
  }


  const tagSelect = document.getElementById('tagSelect')?.value;
  const valueSelect = document.getElementById('valueSelect')?.value;  

  const recordSelect = document.getElementById('recordSelect')?.value + ' Record'; // The selected section-header

  const allRecords = document.querySelectorAll('.record');
  
  const allSectionHeaders = document.querySelectorAll('.section-header');

  
	let anyMatchFound = false; // Track if any match is found
	let matchCount = 0; //  Counter for matches
	
// Reset all section header colors
  allSectionHeaders.forEach(header => {
    header.style.color = '';
  });

	
  allRecords.forEach(record => {
	const recordSection = record.getAttribute('data-section');
    const header = record.querySelector('.record-header');
    const fields = record.querySelectorAll('.record-field');
    let matchFound = false;


    // Reset header color first
    if (header) header.style.color = '';
	const section = record.closest('.section');	
	const sectionHeader = section?.querySelector('.section-header');
	
    const sectionContent = section?.querySelector('.section-content');


    fields.forEach(field => {
      const keySpan = field.querySelector('.key');
      const valueSpan = field.querySelector('.value');
      if (!keySpan || !valueSpan) return;

      const key = keySpan.textContent.replace(':', '').trim();

	   const value = valueSpan.textContent.trim();

      // Reset previous highlight
      valueSpan.style.color = '';

      // Highlight if key matches tagSelect
	  if (key === tagSelect && value === valueSelect) {       
					
			if (recordSection === recordSelect)	{
				valueSpan.style.color = 'red';
				matchFound = true;
				anyMatchFound = true;
				matchCount++; //  Increment match count
				//alert(`Match found!\nKey: ${tagSelect} ${key}\nValue: ${valueSelect} ${value}  \nRecord: ${recordSelect} ${recordSection} `);
			}
	  }
    });

    // Highlight header if any match found
    if (matchFound && header) {
      if (header) header.style.color = 'red';
	  
	  if (sectionHeader && recordSection === recordSelect) {
        sectionHeader.style.color = 'red';
      }
		
	 if (sectionContent && recordSection === recordSelect) {
        sectionContent.style.display = 'block'; // Auto-expand the section
      }

	  //valueSpan.style.color = 'red';
    }
  });
  
  
  // Show alert if no match was found
  if (!anyMatchFound) {
    //alert(`No matching record found for: Tag:${tagSelect} Value:${valueSelect} in ${recordSelect}`);
	//showAlert(`No matching record found for: Tag:${tagSelect} Value:${valueSelect} in ${recordSelect}`);
	
	showAlert(`Oops!  We couldn't find ${tagSelect}:${valueSelect} in ${recordSelect}`,"warning");

  }
	else {
    showAlert(`Found ${matchCount} matching record(s) for ${tagSelect}:${valueSelect} in ${recordSelect}`, "success");
  }

}	
	

function resetView() {
  const allSections = document.querySelectorAll('.section');
  const allRecords = document.querySelectorAll('.record');

  // Reset section headers and collapse content
  allSections.forEach(section => {
    const sectionHeader = section.querySelector('.section-header');
    const sectionContent = section.querySelector('.section-content');
    if (sectionHeader) sectionHeader.style.color = '';
    if (sectionContent) sectionContent.style.display = 'none';
  });

  // Reset record headers and field highlights
  allRecords.forEach(record => {
    const header = record.querySelector('.record-header');
    const fields = record.querySelectorAll('.record-field');
    if (header) header.style.color = '';
    fields.forEach(field => {
      const valueSpan = field.querySelector('.value');
      if (valueSpan) valueSpan.style.color = '';
    });
  });
}



document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('refreshButton')?.addEventListener('click', () => {
    resetView();
  });
});


function validateAndSaveJSON() {
    const raw = document.getElementById('inputRecord')?.value;
    const output = document.getElementById('output');
    if (!output) {
        console.error("Output container not found.");
        return;
    }

    //output.innerHTML = '';

	
	// Check for empty input
    if (!raw || raw.trim() === '') {
        showAlert('No host record data found', 'warning');
        return;
    }


    let data;
    try {
        data = JSON.parse(raw);
    } catch (e) {
        //output.innerHTML = '<p style="color:red;">Invalid JSON format.</p>';
        showAlert('Invalid format','error');
		return;
    }

    // Generate timestamp: YYYYMMDD_HHMMSS
    const now = new Date();
    const timestamp = now.toISOString().replace(/[-:]/g, '').replace('T', '_').split('.')[0];

    // Create file name with timestamp
    const filename = `host_record_${timestamp}.json`;

    // Trigger download
    const jsonStr = JSON.stringify(data, null, 4); // Beautify with 4-space indentation
    const blob = new Blob([jsonStr], { type: "application/json" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    a.click();

    URL.revokeObjectURL(url);
	
    showAlert(`Host record has been saved to file: <strong>${filename}</strong><br>It will be downloaded automatically.`, "success");

	const allSections = document.querySelectorAll('.section');
  const allRecords = document.querySelectorAll('.record');

  // Reset section headers and collapse content
  allSections.forEach(section => {
    const sectionHeader = section.querySelector('.section-header');
    const sectionContent = section.querySelector('.section-content');
    if (sectionHeader) sectionHeader.style.color = '';
    if (sectionContent) sectionContent.style.display = 'none';
  });

  // Reset record headers and field highlights
  allRecords.forEach(record => {
    const header = record.querySelector('.record-header');
    const fields = record.querySelectorAll('.record-field');
    if (header) header.style.color = '';
    fields.forEach(field => {
      const valueSpan = field.querySelector('.value');
      if (valueSpan) valueSpan.style.color = '';
    });
  });
	
}

/*
 function showAlert(message) {
    document.getElementById('alertText').innerHTML = message;
	
	document.getElementById('alertText').innerHTML = message;
	
	document.getElementById("overlay").style.display = "block";
    document.getElementById('customAlert').style.display = 'block';
  } 
*/

const alertIcons = {
  error: `<div style="font-size: 2.5em; text-align: center;">  
	<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="red" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	  <line x1="18" y1="6" x2="6" y2="18" />
	  <line x1="6" y1="6" x2="18" y2="18" />
	</svg>
  </div>`,
  //success: `<div style="font-size: 2.5em; text-align: center;"></div>`,
  
  success: `<div style="font-size: 2.5em; text-align: center;">
	  <svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="green" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	  <polyline points="20 6 9 17 4 12" />
	  </svg>
  </div>`,
  
  warning: `<div style="font-size: 2.5em; text-align: center;">  
		
	<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="orange" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
	  <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
	  <line x1="12" y1="9" x2="12" y2="13" />
	  <line x1="12" y1="17" x2="12.01" y2="17" />
	</svg>
	
  </div>`,
  
  info: `<div style="font-size: 2.5em; text-align: center;">
	<svg xmlns="http://www.w3.org/2000/svg" width="1.5em" height="1.5em" viewBox="0 0 24 24" fill="none" stroke="blue" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
		<circle cx="12" cy="12" r="10"/>
		<line x1="12" y1="7" x2="12" y2="13"/>
		<line x1="12" y1="17" x2="12.01" y2="17"/>
	</svg>
  </div>`
};

function showAlert(message, type = 'info') {
  const icon = alertIcons[type] || alertIcons.info;
  const alertText = document.getElementById("alertText");
  alertText.innerHTML = icon + `<div style="text-align: center;">${message}</div>`;
  document.getElementById("overlay").style.display = "block";
  document.getElementById('customAlert').style.display = 'block';    
  //alertBox.style.display = "block";
}


  function closeAlert() {
    document.getElementById('customAlert').style.display = 'none';
	document.getElementById("overlay").style.display = "none";
  }

	
	
</script>


<body>
	
  <!-- Home Screen -->
  <div id="home" class="screen active">

    <div class="card">
	
     <!--  <h1>Welcome to ParserSweet</h1>
	  <div id="parserlogo"></div> -->

	  
<div class="header-container">
  <h1>Welcome to ParserSweet</h1>
  <div id="parserlogo"> </div>
</div>

	  
	  
      <q>Parsing made sweet and simple. </q>
	  <p>Your data has stories to tell  let ParserSweet help you read them. </p>
      <div class="buttons">
        <button class="btn" onclick="showScreen('axl-parser')">AXL Response</button>
        <button class="btn" onclick="showScreen('de22-eftex-parser')">DE22 for EFTEX</button>
        <button class="btn" onclick="showScreen('cba-mti-parser')">CBA MTI</button>
		<button class="btn" onclick="showScreen('paymark-host-record-parser')">Paymark Host Record</button>
      </div>
    </div>
  </div>

  <!-- Gallery Section -->
  <div id="axl-parser" class="screen">
    <h1>AXL Response Parser</h1>
    <!-- <p>A vibrant collection of artwork, photography, and visual experiments.</p> -->
	<div class="flex-container">
            <div class="input-container">
                <textarea id="json-input" placeholder="Paste your JSON data here..." oninput="parseAXL()"></textarea>
                <!-- <button onclick="parseAXL()">Parse JSON</button> -->
            </div>
            <div id="ParsedTable" class="output-container">
                <div id="json-output"></div>
                <button id="copy-button" onclick="copyTable()" style="position: fixed; bottom: 30px; left: 30px;"> Copy Table</button> 
            </div>
        </div>	
    <button class="btn back-btn" onclick="showScreen('home')">Back</button>
  </div>

  <!-- Projects Section -->
  <div id="de22-eftex-parser" class="screen">
    <h1>POS Data Code (DE22) Parser for EFTEX</h1>
    <!-- <p>Explore innovative works, design experiments, and collaborative creations.</p> -->
	<div class="input-container">
				<div class="de22-input-container">
					<label for="de22-input">DE22 Data:</label>
					<input type="text" id="de22-input" placeholder="A1010151334C101" oninput="displayParsedData()">
					<!-- <button onclick="displayParsedData()">Parse</button> -->
					
				<button id="definitionButton" onclick="displayDefinitions()" style="position: fixed; bottom: 30px; left: 30px;">
					Show Definitions
				</button>

				</div>
				<textarea id="parse-output" placeholder="Parsed CAD data will appear here..." style="white-space: pre-wrap;" > </textarea>
            </div>   
			<div id="DefinitionsOutput"></div>			
    <button class="btn back-btn" onclick="showScreen('home')">Back</button>	
  </div>

  <!-- About Section -->
  <div id="cba-mti-parser" class="screen" style="margin-bottom: 30px;">
    <h1>CBA MTI Parser</h1>
    <!-- <p>Learn more cba-mti-parser the creative mind behind this space and the journey of artistic exploration.</p> -->
    <textarea id="combinedInput" placeholder='Paste your MTI data with "Breakdown :" markers' oninput="parseCombined()"></textarea>
	<!-- <button style="margin-top: 10px; margin-bottom: 10px; width: 120px;" onclick="parseCombined()">Parse</button> -->

	<div id="isoTables" class="tables-container">
	
    <!-- <div class="table-box" style="display: none;">
      <h2>Request</h2>
      <div id="requestTable" style="overflow: visible; height: auto;"></div>
    </div>
    <div class="table-box" style="display: none;">
      <h2>Response</h2>
      <div id="responseTable" style="overflow: visible; height: auto;"> </div>
    </div>
	</div> -->
	
	
      <div id="tabWrapper" style="display: none;">
  <ul class="tabs">
    <li class="tab active" onclick="showTab('request')">Request</li>
    <li class="tab" onclick="showTab('response')">Response</li>
  </ul>

  <div class="tab-content" id="request" style="display: block;">
    <div id="requestTable" style="overflow: visible; height: auto; margin-bottom: 80px;"></div>
  </div>

  <div class="tab-content" id="response" style="display: none;">
    <div id="responseTable" style="overflow: visible; height: 100%; margin-bottom: 80px;"></div>
  </div>
</div>

	</div>
	
	

	
	<button class="btn back-btn" onclick="showScreen('home')">Back</button>
  </div>	
  
  
  <!-- About Section -->
  <div id="paymark-host-record-parser" class="screen" style="margin-bottom: 30px;">
    <h1>Paymark Host Record Parser</h1>
    <!-- <p>Learn more cba-mti-parser the creative mind behind this space and the journey of artistic exploration.</p> -->
    
	<!-- <button style="margin-top: 10px; margin-bottom: 10px; width: 120px;" onclick="parseCombined()">Parse</button> -->
	
	<div style="display: flex; gap: 20px; align-items: flex-start;">
	<div style="flex: 1;">
	<textarea id="inputRecord" placeholder='Paste your host record here' onchange="parseHostRecord()" oninput="parseHostRecord()"></textarea>
	<br/>
	<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
	<!-- <div>
	<button onclick="parseData()">&lt;&gt; Parse</button>
	</div> -->
	<div>
	<label for="recordSelect">Records:</label>
	<select id="recordSelect" style="width: 150px;">
	<!-- <option value="A">A Record</option>
	<option value="X">X Record</option>
	<option value="C">C Record</option> -->
	</select>
	<label for="tagSelect">Tags:</label>
	<select id="tagSelect" style="width: 150px;">&gt;
			  
			</select>
	<label for="valueSelect">Value:</label>
	<select id="valueSelect" style="width: 150px;margin-right: 50px; ">
	</select>

	<button onclick="findRecord()"> Find</button>
	<button id="refreshButton" title="Refresh">
	   Refresh
	</button>

	<input type="file" id="fileInput" accept=".txt,.json" style="display:none" onchange="loadFileContent(event)">
	<button onclick="document.getElementById('fileInput').click()"> Open</button>


	<button onclick="validateAndSaveJSON()"> Save</button>
	</div>
	</div>
	<br/>
	<div id="output" style="margin-top: 20px;"></div>
	<!-- <div id="recordContainer"></div> -->
	</div>
	</div>
	
	
	
	<button class="btn back-btn" onclick="showScreen('home')">Back</button>
  </div>	
	
<div id="overlay"></div>
<div id="customAlert">
  <div id="alertText"></div>
  <button onclick="closeAlert()">OK</button>
</div>

	
</body>
</html>
